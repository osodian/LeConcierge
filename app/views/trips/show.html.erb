
<%= render 'layouts/navbar' %>

<div class="show">
    <div id="left">
      <h3 id="filters">Notebook</h3>
      <div class="row mt-5">
  <div class="col-3">
    <%# <div class="nav flex-column nav-pills" id="v-pills-tab" role="tablist" aria-orientation="vertical">
      <a class="nav-link active" id="v-pills-overview-tab" data-toggle="pill" href="#v-pills-home" role="tab" aria-controls="v-pills-home" aria-selected="true">Overview</a>
      <a class="nav-link" id="v-pills-date-tab" data-toggle="pill" href="#v-pills-profile" role="tab" aria-controls="v-pills-profile" aria-selected="false"><%= @trip.date_coming.strftime("%b %d, %Y") %></a>
      <%# <a class="nav-link" id="v-pills-date-tab" data-toggle="pill" href="#v-pills-messages" role="tab" aria-controls="v-pills-messages" aria-selected="false"><%= @trip.date_leaving.strftime("%b %d, %Y") %></a>
    <%# </div> %>
  </div>
  </div>
    </div>


  <div id="right">

    <div id="destination">
      <h3>Your trip to <%= @trip.destination %></h3>
      <br>
      <% if @trip.hotel_bookings.empty? %>
        <h3><%= link_to 'Do you want to book a hotel?', trip_hotel_bookings_path(@trip) %></h3>
      <% else %>
        <% @trip.hotel_bookings.each do |hotel|%>
          <h3>Costs per night: $<%= hotel.hotel.price %></h3>
          <h3>Total Costs Hotel (shows 2 nights): $<%= hotel.hotel.price + hotel.hotel.price %></h3>
        <% end %>
      <% end %>
      <br>

      <% if @trip.activity_bookings.empty? %>
        <h3><%= link_to 'Do you want to book a restaurant, sightseeing, club? Or many other things!', trip_activity_bookings_path(@trip) %></h3>
      <% else %>
        <h3>Fixed Prices for Activities: $<%= @trip.total_price %></h3>
        <h3><%= link_to 'Add another activity?', trip_activity_bookings_path(@trip) %></h3>
      <% end %>

    </div>

  <% @trip.hotel_bookings.each do |hotel|%>
    <div class="day-program">
      <h4>Check in: <%= hotel.date_coming.strftime("%b %d, %Y") %></h4>
      <%= link_to 'Show this Hotel', trip_hotel_booking_path(@trip, hotel) %>
      <%= link_to 'Add another Hotel to Trip', trip_hotel_bookings_path(@trip) %>
      <%= link_to 'Edit this Hotel booking', edit_trip_hotel_booking_path(@trip, hotel) %>
      <%= link_to 'Delete Hotel Booking', hotel_booking_path(hotel), method: :delete, data: { confirm: "Are you sure?" }%>
    <div class="card">
       <div class="row">
          <div class="col-lg-2" id="activity-icon">
            <i class="material-icons" style="font-size:60px;">local_bar</i>
          </div>
          <div class="col-lg-8" id="activity-infos">
              <p id="card-content"><%= hotel.hotel.address %></p>
              <h3 id="card-content"><%= hotel.hotel.name %></h3>
          </div>
          <div class="col-md-2" id="edit-icon">
            <i class="material-icons" style="font-size:32px;">edit</i>
          </div>
        </div>
      </div>
    </div>
  <% end %>

  <% @activity_bookings.each do |activity|%>
    <div class="day-program">
      <div class="day">
        <h4><%= activity.booking_date.strftime("%b %d, %Y") %></h4>

        <%= link_to 'Add an Activity to Trip', trip_activity_bookings_path(@trip) %>
        <%= link_to 'Show this activity', trip_activity_booking_path(@trip, activity) %>
        <%= link_to 'Edit this activity', edit_trip_activity_booking_path(@trip, activity) %>

        <%= link_to 'Delete activity', activity_booking_path(activity), method: :delete, data: { confirm: "Are you sure?" }%>

      </div>
    <div class="card">
       <div class="row">
          <div class="col-lg-2" id="activity-icon">
            <i class="material-icons" style="font-size:60px;">local_bar</i>
          </div>
          <div class="col-lg-8" id="activity-infos">
              <p id="card-content"><%= activity.activity.category %></p>
              <h3 id="card-content"><%= activity.activity.name %></h3>
          </div>
          <div class="col-md-2" id="edit-icon">
            <i class="material-icons" style="font-size:32px;">edit</i>
          </div>
        </div>
      </div>
    </div>
  <% end %>
     <%# activity.address
    <p><%= activity.description %>

    <%# <% if activity.price.nil?  %>
      <%# <p><%= activity.price_class %>
    <%# <% else %>
      <%# <p><%= activity.price %>
      <%# <p><%= activity.price_class %>
    <%# <% end %>

  <% @trip.hotel_bookings.each do |hotel|%>
    <div class="day-program">
      <h4>Check out: <%= hotel.date_leaving.strftime("%b %d, %Y") %></h4>
    <div class="card">
       <div class="row">
          <div class="col-lg-2" id="activity-icon">
            <i class="material-icons" style="font-size:60px;">local_bar</i>
          </div>
          <div class="col-lg-8" id="activity-infos">
              <p id="card-content"><%= hotel.hotel.address %></p>
              <h3 id="card-content"><%= hotel.hotel.name %></h3>
          </div>
          <div class="col-md-2" id="edit-icon">
            <i class="material-icons" style="font-size:32px;">edit</i>
          </div>
        </div>
      </div>
    </div>
  <% end %>

<div id="map"
     style="width: 100%; height: 600px;"
     data-markers="<%= @markers.to_json %>"
     data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>">
</div>

<%= render 'layouts/footer' %>
